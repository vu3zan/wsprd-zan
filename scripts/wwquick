#!/bin/bash
#
# Last mod 2022-12-22 by VU3ZAN Sunil Aruldas
# bash file 'wwquick' for Guenael rtlsdr_wsprd current log in ~/wsprd/wlogs/, and 8 backup logs in ~/wsprd/wlogs/backups/
# to put all Spots, and then all NON 'A000AA'& '<...>' Spots, counted frequency wise, in a file ~/wsprd/wlogs/wwquick.log
# Used thus "wwquick bn" where n is 1 to 8 for each of 8 backup log files b1.log to b8.log. 
# (Note: Only name to be given, the '.log' extension is added automatically)
# Also analyze the wwvalidlist.log in $HOME/wsprd/wlogs/ by giving 'valid'

genfile=$1
fullfile=""
logfile="$HOME/wsprd/wlogs/wsprd.log"

if 
	[ -z $genfile ] # file name is not given, variable is empty
then
	fullfile="$logfile" # default file is current wsprd.log
else
	case $genfile in
		b1 | b2 | b3 | b4 | b5 | b6 | b7 | b8)
			genfile2="$genfile"".log"
			fullfile="$HOME/wsprd/wlogs/backups/""$genfile2";;
		valid)
			genfile2="ww""$genfile""list.log"
			fullfile="$HOME/wsprd/wlogs/""$genfile2";;
		*)
			echo
			echo "Sorry! No such file exists/permitted"
			echo "Please enter file name 'b1' to 'b8' only, or 'valid'"
			echo
			exit;;
	esac

fi

echo " * File under analysis : ""$fullfile"

 echo Bash file wwquick for Guenael rtlsdr_wsprd current log in ~/wsprd/wlogs/, and 8 backup logs > ~/wsprd/wlogs/wwquick.log
 echo in ~/wsprd/wlogs/backups/ >> ~/wsprd/wlogs/wwquick.log
 echo To first count ALL Spots frequency-wise, and then all VALID Spots, >> ~/wsprd/wlogs/wwquick.log
 echo and record the count in a file ~/wsprd/wlogs/wwquick.log >> ~/wsprd/wlogs/wwquick.log
 echo >> ~/wsprd/wlogs/wwquick.log
 echo " * File under analysis : ""$fullfile">> ~/wsprd/wlogs/wwquick.log
 echo >> ~/wsprd/wlogs/wwquick.log
 echo ---------------------------- >> ~/wsprd/wlogs/wwquick.log
 echo ALL SPOTs >> ~/wsprd/wlogs/wwquick.log
 echo    Counting for 6m >> ~/wsprd/wlogs/wwquick.log
 grep  '50\.29' "$fullfile" -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 10m >> ~/wsprd/wlogs/wwquick.log
 grep  '28\.12' "$fullfile" -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 15m >> ~/wsprd/wlogs/wwquick.log
 grep  '21\.09' "$fullfile" -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 20m >> ~/wsprd/wlogs/wwquick.log
 grep  '14\.09' "$fullfile" -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 40m >> ~/wsprd/wlogs/wwquick.log
 grep  ' 7\.03' "$fullfile"  -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 80m >> ~/wsprd/wlogs/wwquick.log
 echo    for both new and old 80m wspr frequency >> ~/wsprd/wlogs/wwquick.log
 grep  ' 3\.5' "$fullfile" -c >> ~/wsprd/wlogs/wwquick.log
 # allowing for old 80m wspr frequency still in use 
 # Pl Note: two decimal points are given for each frequency [except 80m]
# because otherwise the wwspot program is giving false positives by picking up values like
# 21.0 in some other column

 echo ---------------------------- >> ~/wsprd/wlogs/wwquick.log
 echo
 echo VALID SPOTs ONLY - WITHOUT 'A000AA' and '<...>' cases >> ~/wsprd/wlogs/wwquick.log
 echo    Counting for 6m >> ~/wsprd/wlogs/wwquick.log
 grep  '50\.29' "$fullfile" | grep -v -E "A000AA|<...>" -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 10m >> ~/wsprd/wlogs/wwquick.log
 grep  '28\.12' "$fullfile" | grep -v -E "A000AA|<...>" -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 15m >> ~/wsprd/wlogs/wwquick.log
 grep  '21\.09' "$fullfile" | grep -v -E "A000AA|<...>" -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 20m >> ~/wsprd/wlogs/wwquick.log
 grep  '14\.09' "$fullfile" | grep -v -E "A000AA|<...>" -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 40m >> ~/wsprd/wlogs/wwquick.log
 grep  ' 7\.03' "$fullfile" | grep -v -E "A000AA|<...>"  -c >> ~/wsprd/wlogs/wwquick.log

 echo    Counting for 80m >> ~/wsprd/wlogs/wwquick.log
 echo    for both new and old 80m wspr frequency >> ~/wsprd/wlogs/wwquick.log
 grep  ' 3\.5' "$fullfile" | grep -v -E "A000AA|<...>" -c >> ~/wsprd/wlogs/wwquick.log
 # allowing for old 80m wspr frequency still in use 

less  ~/wsprd/wlogs/wwquick.log 
echo

# end of program


