#!/bin/bash
#
# Last mod 2022-12-22 by VU3ZAN Sunil Aruldas
# Bash file 'wwspot' for Guenael rtlsdr_wsprd log in ~/wsprd/wlogs/wsprd.log 
# to put all Spots in a file ~/wsprd/wlogs/wwspot.rpt
# to read with the less utility as default without giving any file name.
# Also read the backup logs in $HOME/wsprd/wlogs/backups/ 
# Used thus : 'wwspot bn'  --- where n is 1 to 8 for each of 8 daily log files b1.log to b8.log.

genfile=$1
fullfile=""
logfile="$HOME/wsprd/wlogs/wsprd.log"

if 
	[ -z $genfile ] # file name is not given, variable is empty
then
	fullfile="$logfile" # default file is current wsprd.log
else
	case $genfile in
		b1 | b2 | b3 | b4 | b5 | b6 | b7 | b8)
			genfile2="$genfile"".log"
			fullfile="$HOME/wsprd/wlogs/backups/""$genfile2";;
		*)
			echo
			echo "Sorry! No such file exists/permitted"
			echo "Please enter file name 'b1' to 'b8' only"
			echo
			exit;;
	esac

fi

echo " * File under analysis : ""$fullfile"

echo Bash file 'wwspot' for Guenael rtlsdr_wsprd log in ~/wsprd/wlogs/wsprd.log   > ~/wsprd/wlogs/wwspot.rpt
echo to put all Spots in a file ~/wsprd/wlogs/wwspot.rpt  >> ~/wsprd/wlogs/wwspot.rpt
echo to read with the less utility as default, without giving any file name.  >> ~/wsprd/wlogs/wwspot.rpt
echo Also read the backup logs in $HOME/wsprd/wlogs/backups/   >> ~/wsprd/wlogs/wwspot.rpt
echo Used thus :  'wwquick bn' --- where n is 1 to 8 for each of 8 log files b1.log to b8.log.  >> ~/wsprd/wlogs/wwspot.rpt
echo >> ~/wsprd/wlogs/wwspot.rpt
echo " * File under analysis : ""$fullfile">> ~/wsprd/wlogs/wwspot.rpt
echo "                    UTC" >> ~/wsprd/wlogs/wwspot.rpt
echo  >> ~/wsprd/wlogs/wwspot.rpt


grep 'Spot :' "$fullfile" >> ~/wsprd/wlogs/wwspot.rpt

less ~/wsprd/wlogs/wwspot.rpt
echo
wc  -l ~/wsprd/wlogs/wwspot.rpt 
echo "(less 9 lines used for description heading)"
echo

# end of program
